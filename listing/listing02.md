Что выведет программа? Объяснить вывод программы. Объяснить как работают defer’ы и их порядок вызовов.

```go
package main

import (
	"fmt"
)


func test() (x int) {
	defer func() {
		x++
	}()
	x = 1
	return
}


func anotherTest() int {
	var x int
	defer func() {
		x++
	}()
	x = 1
	return x
}


func main() {
	fmt.Println(test())
	fmt.Println(anotherTest())
}
```

Ответ:
```
2
1
```
Три правила поведения оператора defer: <br>
1. Аргументы отложенной (defer) функции вычисляются в момент объявления. <br>
2. Отложенные (defer) функции вызываются в обратном порядке (LIFO). <br>
3. Отложенные (defer) функции могут изменять значения именованных возвращаемых значений внешней функции в процессе return. <br>

Также важно отметить, что defer выполняется после ключевого слова return, но до реального возврата функции. <br>
- return записывает все необходимые к возврату значения в стек
- происходят defer'ы
- функция возвращает управление родительской функции

Функция test() попадает под 3 правило, инкрементируя значение с возвращаемой еденицы до двойки внутри стека возвращаемых переменных. <br><br>
Хочется сказать, что функция anotherTest() попадает под 1 правило, но по факту в отложенную функцию не передаётся аргументов, соответственно x в момент исполнения будет 1, а не 0. Вся разница в том, что изменяется уже другая переменная x, не та, которую сохранил в стек возврата return, а та, которая находится в функции.
